# 版本信息
|后台模块|6.0.5|6.1.0 版本|
|---|---|---|
|bkiam|1.7.7|1.10.4|
|bklog|4.2.645|4.3.1-257|
|bkmonitorv3|3.3.1449|3.4.2253|
|bknodeman|2.0.927|2.2.12|
|bkssm| 1.0.8|-|
|cmdb|3.9.27|3.10.15|
|fta|5.2.13|-|
|gse|3.5.16|3.6.18|
|job|3.2.7.3|3.5.0.12|
|license|3.1.5|-|
|open_paas|2.12.25|2.14.8|
|paas_agent|3.2.3|3.2.4|
|usermgr|2.2.6-b3|2.3.4-beta.16|
|bkiam_search_engine|-|1.0.6|

|SaaS|6.0.5 版本|6.1.0 版本|
|---|---|---|
|bk_iam|1.4.24|1.7.17|
|bk_log_search|4.2.645|4.3.1-257|
|bk_monitorv3|  3.3.1931|3.4.2655|
|bk_nodeman|2.0.1615|2.2.12|
|bk_sops|3.6.4206|3.17.3|
|bk_itsm|2.5.8.306|2.6.1.385|
|bk_fta_solutions|5.2.14|5.2.16|
|bk_user_manage|2.2.6|2.3.4-beta.16|

# 版本日志
## 部署脚本
- [新增] bkiam_search_engine 部署逻辑
- [新增] 容器管理套餐服务查看、启停接入部署脚本
- [新增] bkmonitorv3 trace 上报变量和 bcs 容器监控变量
- [新增] 单机部署支持 bkiam_search_engine
- [新增] Aix 的 agent 打包逻辑
- [优化] 用户管理 2.3.x 版本 migrate 去除 DJANGO_SETTINGS_MODULE 逻辑

## PaaS 平台
- [新增] 登录页面支持国际化
- [新增] 支持 smart 细粒度权限
- [新增] 消息通知组件支持返回发送失败的人员信息（如离职人员）
- [新增] login 支持 password 表单加密
- [更新] ESB 更新 usermanage/sops/monitor_v3/jobv3/itsm/iam/gsekit/bscp/bk_log 配置类组件
更多版本日志详见 https://github.com/Tencent/bk-PaaS/releases

## 权限中心
- [新增] 本地缓存添加额外随机过期时间
- [新增] policy 表增加 updated_at 索引
- [新增] 授权 API 白名单支持前缀匹配规则
- [新增] 自动更新策略里的重命名的资源实例
- [新增] 接入系统回调查询实例列表支持传祖先实例
- [新增] 聚合操作支持同时聚合多种资源类型
- [优化] 更新 paas v3 smart 配置
- [优化] 分享链接自动带上条件过滤
- [修复] 新建关联授权 API 由于注册的配置里存在资源类型层级导致失败问题
- [修复] 权限策略部分删除报错问题
- [修复] 由于资源实例名称中存在空格导致授权报错问题
- [修复] 清理过期权限出错问题
- [修复] 权限审批使用系统管理员审批流程审批人员为空问题
- [修复] 管理类 API 创建用户组绑定分级管理员错误问题
- [修复] 管理类 API 创建分级管理员时授权范围没有按照系统聚合导致后续授权问题
- [修复] 未选择任何权限可保存为推荐权限模板
- [修复] 从配置平台跳转到权限中心无法选择
- [修复] 已有实例权限不应该纳入新实例申请限制数里
- [修复] 普通用户没有任何分级管理员时无法注销问题

## 用户管理
- [新增] 支持传递参数，可以拉取已软删除数据
- [新增] 支持恢复已删除的数据
- [新增] 支持记录 LDAP/AD 同步组织架构/人员信息的结构化日志
- [新增] 支持数据源同步任务页面查看
- [新增] 支持登录日志导出
- [修复] 数值型自定义字段在页面上输入时没有异常提示
- [修复] “从其他组织拉取用户”异常问题
- [修复] SettingMeta 默认路径参数为 id
- [修复] API /api/v2/batch/profiles/ 中 swagger 参数 query_ids 缺失问题
- [优化] 数据源同步任务为后台执行
- [优化] 修改页面拉取上级组件，从全量拉取改为类似【人员选择器】的分页拉取组件

## 配置平台
- [新增] 添加内置 BlueKing 全业务的业务集，禁止删除它以及更新资源范围
- [新增] 小工具增加对 redis 的操作支持
- [新增] 主机的自动发现信息属性字段调整为可编辑
- [新增] 服务模板实例标签加同步状态批示提示
- [新增] 模型管理页增加“全部”入口
- [新增] 调整接入用户管理使用的接口
- [新增] 定时对账 zk 节点任务能力
- [新增] list_biz_hosts 接口新增支持按模块属性查询数据，list_biz_hosts_topo 接口新增支持按集群、模块属性查数据
- [新增] 清除冗余 task 任务记录并设置定时清理机制
- [新增] 批量获取 topo 节点主机/服务实例数量的接口，业务拓扑节点主机/服务实例数量异步加载
- [新增] 服务模板绑定 IP 的校验规则放开，允许绑定 IP 为空
- [新增] 在主机类型枚举中增加 Solaris 类型
- [新增] 各个模块新增 version 接口获取版本相关信息
- [新增] 前后端统一正则校验方式，统一用后端的正则校验方式进行校验。
- [新增] 首页主机搜索添加高级搜索入口跳转到资源主机高级筛选侧滑
- [新增] 集群模板拓扑树显示区域加 loading
- [新增] 禁止主机转移至已经归档的业务
- [新增] 清理审计日志接口 [https://github.com/Tencent/bk-cmdb/issues/5603](https://github.com/Tencent/bk-cmdb/issues/5603)
- [新增] 清理审计日志接口 [接口参考](https://github.com/Tencent/bk-cmdb/issues/5603)
- [新增] 业务支持跨页批量编辑
- [新增] 归档业务提供“彻底删除”能力
- [新增] 接口 list_service_instance_detail 新增支持传入多个 hostId 
- [新增] 查询业务的接口支持批量传参
- [新增] 提供新接口给资源池的变更记录功能使用，鉴权方式与操作审计不同，根据用户是否有实例查看权限进行鉴权
- [新增] 平台管理模块
- [新增] 首页多 IP 搜索支持逗号和分号分隔及返回时记住搜索内容
- [新增] 服务模板支持克隆
- [新增] 支持多个业务的空闲机模块中的主机转移到另外一个业务的空闲机模块
- [新增] 支持业务集管理功能形态
- [新增] 支持更改模型分组能力
- [新增] 添加内外网 IPv6 字段和 agent id 字段
- [新增] 添加服务实例审计
- [新增] 服务实例，主机和拓扑关系表的 2 个索引
- [优化] 业务列表筛选组件切换为通用搜索组件
- [优化] 创建集群、模块时，对应模板列表按最后更新时间排序
- [优化] 主机自动应用的详情预览拉取数据改为异步加载，提升性能体验
- [优化] 主机自动应用的详情预览拉取接口内容瘦身，避免拉取冗余数据
- [优化] 显示业务主机追加至业务模块菜单逻辑
- [优化] 集群模板同步性能，提升交互体验，同时去掉了集群模板及集群表中的 version 管理字段
- [优化] cmdb 导出实例数据，当导出的字段包含用户字段，且用户字段有值时，导出非常慢
- [优化] 开放字符数限制及修改前端校验规则
- [优化] 调整前端正则校验方式，正则本身及内容的合法校验全部用后端校验
- [修复] 云账户编辑时连通测试通过无法保存的问题
- [修复] 非业务主机详情选项卡 UI 异常的问题
- [修复] 筛选主机并查看详情后返回筛选条件丢失的问题
- [修复] 创建拓扑自定义层级节点时出现 ID 字段的问题
- [修复] taskserver 清除一个月之前的冗余任务
- [修复] 通用模型内置字段名称统一为不可修改
- [修复] 业务名搜索从大小写敏感改成大小写不敏感
- [修复] coreservice 优化 count 逻辑
- [修复] 优化多值过滤项中 IP 项溢出隐藏文案展示
- [修复] 动态分组条件操作符未显示问题
- [修复] 获取 topo 节点主机数量接口缺陷
- [修复] 主机属性自动应用的逻辑失效问题
- [修复] 主机与服务实例解耦优化
- [修复] 主机和通用模型实例权限申请只显示无权限的实例
- [修复] 查询有权限的实例列表功能优化

## 作业平台
- [新增] 支持选择服务器时将拓扑中没有主机的空节点隐藏
- [新增] 公共脚本管理 支持按脚本实例级别的细粒度权限管控
- [新增] 执行账号使用权限迁移 
- [新增] 全局变量支持批量编辑 
- [新增] 脚本同步作业模板后，增加同步执行方案的入口，减少用户操作路径 
- [新增] 手动录入 IP 交互优化错误 IP 的提示体验 
- [新增] 作业列表的小红点提醒，支持点击后跳转的对应页面 
- [新增] 提供一键清除无效 IP 的功能按钮 
- [新增] “主机列表”类型的全局变量交互优化 
- [新增] 用户登出时需要有二次确认窗口 
- [新增] 执行方案重做时的页面包屑增加执行方案名称的显示 
- [新增] License Server 校验逻辑调整，仅在启动时校验
- [新增] 新增 batch_get_job_instance_ip_log API
- [新增] 单次定时任务提供 api 接口创建 
- [新增] 对接 cmdb 业务集
- [新增] 微服务安全配置优化
- [新增] 新增 batch_get_job_instance_ip_log API
- [新增] 单次定时任务提供 api 接口创建
- [优化] 执行引擎的 shell 上下文参数引用方式由 source 改为 .
- [优化] 优化了作业模板步骤中引用了 主机列表 的全局变量被删除后的指引交互
- [优化] 一些常规的 UI / UX 优化...
- [优化] 脚本的删除逻辑恢复为 逻辑删除
- [优化] 支持部署时配置加密密钥，避免账号的密码加密算法被破解
- [优化] 补充部分 JOB 自身平台的消息通知监控指标
- [优化] 一些常规的 UI / UX 优化...
- [修复] 解决执行详情页切换步骤后，变量明细 没有正常更新的问题
- [修复] 解决 API 调用时传入 account alias 会导致 JOB 页面无法正确解析的问题
- [修复] 解决带全局变量的任务重试后，执行结果不正确的问题
- [修复] Spring Cloud Config 漏洞 CVE-2020-5410
- [修复] Spring Cloud Gateway 高危漏洞 CVE-2022-22947
- [修复] API 创建定时任务全局变量不生效

## 节点管理
- [新增] 作业平台业务集支持
- [优化] 周期任务执行削峰
- [优化] 兼容操作系统名称为 None 的情况
- [优化] 安装插件同时下发脚本
- [优化] CMDB 同步的主机若无操作系统，默认填充为 LINUX
- [修复] CMDB 内网 IP 为空同步问题
- [修复] Windows 移除配置错误的问题
- [修复] 监控插件 debug & stop debug 问题修复
- [修复]celery 任务添加 ignore_result 参数忽略，避免部分无用的 celery result 占用 rabbitmq 队列
- [修复]手动安装命令错误
- [修复]优化插件配置模板扩充方式

## 管控平台
- [新增] aix gse_agent 的支持
- [新增] 数据服务支持多输入多输出工作模式(MIMO)
- [新增] 数据服务 channelid 管理，新增服务 gse_config
- [新增] 平台化服务支持 BSCP
- [新增] 进程管理服务支持 GSEKIT2.0
- [新增] 日志系统升级，支持日志分级
- [新增] 安全支持。配置中 zk, redis 等敏感信息保护；代码中铭感信息，动态注入
- [新增] 内存资源限制支持指定内存数值。默认配置内存数值不生效
- [新增] on_migrate 初始化支持 gse_config 基础路径创建 
- [新增] 支持自定义脚本临时文件清理策略
- [新增] 支持 linux 环境下 UTF8、GBK 编码转换
- [新增] 支持自定义脚本临时文件清理策略
- [新增] 支持 linux 环境下 UTF8、GBK 编码转换
- [新增] gse_agent 资源保护机制中 CPU，mem 等资源配置开放可配置
- [新增] 附带提供 ARM 架构和 AIX6、AIX7 系统的 zip 工具
- [新增] pulsar client 参数支持配置文件中可配置
- [新增] gse_config 路由支持 platid 
- [新增] gse_task 新增 copy_file_reentrancy 接口  
- [优化] 文件服务协议优化(向下兼容)
- [优化] 进程管理状态数据汇聚查询优化
- [优化] 主机身份优化
- [优化] 数据服务版本统一。proxy 的 gse_transmit 下线，替换为 gse_data
- [修复] gsectl.bat 脚本启动失败问题

## 监控平台
- [新增] snmp 主动采集，增加指定目标设备 snmp 端口的参数
- [新增] 兼容策略日志时间展示
- [新增] 拨测节点 ip 选择器增加云区域展示
- [修复] jmx 下 windows 插件启停脚本执行失败的问题修复
- [修复] 事件型策略可能出现层级抑制失败问题
- [修复] 修复事件详情跳转检索为对应时间
- [修复] 修复目标选择器可能会出现的 key error 问题
- [修复] 修复策略标签引起编辑策略卡住的问题
- [修复] 修复视图最小值计算问题
- [修复] 修正错误的拨测响应内容和响应码策略配置
- [修复] 新建 process 采集配置时采集对象默认值不正确
- [修复] 无维度策略无数据误告问题处理
- [修复] 服务拨测节点编辑页面节点名称显示错误
- [修复] 主机监控主机筛选问题修复
- [修复] 插件设置指标维度修复全选操作移动指标维度未联动问题
- [修复] 插件调试 ip 选择滚动问题修复
- [修复] 数据检索更换汇聚周期组件
- [修复] 新建插件插件调试 loading 样式调整
- [修复] 标签选择器标签选择器重名检测问题修复
- [修复] 策略列表监控目标默认为本业务时，列表页也需要同步
- [修复] 采集列表翻页时没有及时刷新目标信息
- [优化] webhook url 配置支持传递参数，在回调时返回
- [优化] 事件中心关联信息节点信息重复显示
- [优化] 优化日志关联信息查询时间段，避免查询过多数据
- [优化] 优化首页事件查询时间段，避免查询过多数据点导致页面卡顿
- [优化] 使用 Count 的策略及图表不能使用原指标单位
- [优化] 变量查询支持日志 index_set_id 自动补全
- [优化] 图表查询支持日志平台特殊时间字段
- [优化] 插件支持 ARM 架构
- [优化] 日志平台来源非 es_doc_values 字段允许作为条件字段
- [优化] 网络发包量单位修正，指标顺序调整
- [优化] 自监控增加自增 ID 太大预警
- [优化] 避免日志指标出现指标和维度相同的情况
- [优化] 采集视图状态说明优化
- [优化] 采集配置列表页接口优化
- [优化] 采集配置状态视图优化

## 日志检索
- [新增] 检索-新增索引集收藏功能
- [新增] 检索-日志检索查询会同步修改 URL，方便用户分享
- [新增] 检索-过滤条件新增 exists 和 does not exists 支持
- [新增] 检索-上下文、实时日志支持过滤、快捷键操作
- [新增] 采集-新增采集项自定义配置
- [新增] 采集-新增字段提取 object 类型支持
- [新增] 采集-新增 data_id 接入计算平台
- [新增] 采集-新增根据主机获取获取采集项列表接口
- [新增] 提取-文件预览新增全选或多选支持
- [新增] 管理端-支持查看采集项数据存储（包含基础信息，物理索引信息，字段信息等）
- [新增] 管理端-支持查看采集项数据状态（包括数据趋势，数据采样等）
- [新增] 管理端-支持查看采集项使用详情（包括使用统计，检索记录等）
- [新增] 管理端-支持查看索引集基本信息（包括物理索引信息，操作记录等）
- [新增] 管理端-支持查看索引集使用详情（包括使用统计，检索记录等）
- [新增] 管理端-支持查看索引集字段信息
- [新增] 全链路追踪-opentelemetry 协议支持
- [新增] grafana 集成 trace 展示能力
- [修复] 采集-修复采集下发主机与 CMDB 拓扑对应显示异常的问题
- [修复] 采集-修复采集项详情查看采集状态与 CMDB 拓扑对应显示异常的问题
- [修复] 采集-采集项编辑下发任务展示偶现报错异常
- [修复] 采集-修复 itsm 回调记录日志异常问题
- [修复] 采集-字段提取 修复日志字段提取结果长度过长无法查看完整信息问题
- [修复] 提取-修复提取判断 tmp 目录，没有指定正确,导致容量判断错误
- [修复] 调用链-trace 字段列表返回别名错误
- [优化] 公共-系统缓存由 mysql 更换为 redis
- [优化] 公共-csrftoken 跨域访问异常问题优化
- [优化] 检索-esquery 支持 qos 流量控制特性
- [优化] 检索-时间组件支持输入自定义时间
- [优化] 检索-优化索引集查询结果最大查询条数由 500 条修改为 2000 条
- [优化] 采集-采集目标、下发、采集状态性能优化
- [优化] 提取-统一正则，由环境变量调整有效的字符范围

## 故障自愈
- [修复] 修改所有页面人员选择器组件对接最新用户管理接口

## 标准运维
- [新增] 全局变量新增克隆功能
- [新增] 新增公共流程执行方案
- [新增] 轻应用列表新增复制桌面链接操作
- [新增] 任务执行树支持查看控制节点执行详情
- [新增] 元变量支持勾选为全局变量
- [新增] IAM 添加业务运维和管理员权限两个公共操作
- [新增] 子流程新增总是使用最新版本选项
- [新增] 参数填写页面增加变量 key 显示
- [新增] 任务执行页面动态设置浏览器 tab 的 title/icon 功能
- [新增] 模板添加任务类型偏好设置
- [新增] 克隆生成的新任务默认使用 V2 引擎
- [新增] 添加批量插入基于项目插件的管理接口
- [新增] JOB 插件支持 JOB 业务集
- [优化] 自动忽略错误跳过的节点需要有角标标记
- [优化] renderform 表单正则校验默认通过${xxx}格式类型值
- [优化] 批量更新主机所属业务模块支持输入不带业务名的路径拓扑
- [修复] 修复 create_task 接口创建未传元变量参数时对应参数默认值获取失败问题
- [修复] 修复监控屏蔽插件开始/结束时间勾选时创建任务报错问题
- [修复] 修复 CMDB 更新模块属性插件选中集群下所有模块时报错问题
- [修复] 修复配置单业务下最大周期任务数量时周期任务失败问题

## 流程服务
- [修复] 异常分派问题
- [修复] api 导入权限逻辑问题
- [修复] 项目内通知模板鉴权问题
- [修复] 自定义 tab 在工作台显示的问题
- [优化] 单据详情页 UI
